{"version":3,"sources":["Components.tsx","plugins/block.ts","plugins/link.ts","plugins/mark.ts","EditorFrame.tsx","Client.tsx","Room.tsx","App.tsx","index.tsx"],"names":["RoomWrapper","styled","div","H4","h4","Input","input","Button","button","IconButton","props","color","active","border","padding","Icon","Grid","Title","Instance","online","ClientFrame","LIST_TYPES","isBlockActive","editor","format","Editor","nodes","match","n","type","isLinkActive","unwrapLink","Transforms","unwrapNodes","wrapLink","href","selection","isCollapsed","Range","link","children","text","insertNodes","wrapNodes","split","collapse","edge","isMarkActive","marks","renderElement","EditorFrame","value","onChange","renderLeaf","useCallback","style","display","flexWrap","position","top","backgroundColor","zIndex","icon","Element","attributes","element","Leaf","leaf","bold","code","italic","underline","alphaColor","BlockButton","useSlate","onMouseDown","event","preventDefault","isActive","isList","includes","setNodes","block","toggleBlock","className","MarkButton","removeMark","addMark","toggleMark","LinkButton","url","window","prompt","insertLink","Client","id","name","slug","removeUser","useState","setValue","isOnline","setOnlineState","useMemo","doc","Y","getArray","WebsocketProvider","connect","sharedType","provider","withYjs","e","insertData","insertText","isInline","isUrl","data","getData","withLinks","withReact","withHistory","createEditor","useEffect","on","status","isSynced","length","toSharedType","disconnect","Head","marginTop","marginBottom","onClick","createUser","faker","random","uuid","firstName","lastName","Room","removeRoom","users","setUsers","roomSlug","setRoomSlug","isRemounted","setRemountState","remount","debounce","setTimeout","userId","filter","u","target","concat","map","user","key","App","rooms","setRooms","addRoom","lorem","room","r","Panel","AddButton","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bb9283ec.chunk.js","sourcesContent":["import styled from \"@emotion/styled\";\n\nexport const RoomWrapper = styled.div`\n  padding-bottom: 10px;\n  border-bottom: 2px solid #e8e8e8;\n`;\n\nexport const H4 = styled.h4`\n  margin: 0;\n  padding-right: 10px;\n`;\n\nexport const Input = styled.input`\n  padding: 6px 14px;\n  font-size: 14px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  min-width: 240px;\n  outline: none;\n  border: 2px solid palevioletred;\n  margin-right: auto;\n`;\n\nexport const Button = styled.button`\n  padding: 6px 14px;\n  display: block;\n  outline: none;\n  background-color: transparent;\n  font-size: 14px;\n  text-align: center;\n  color: palevioletred;\n  white-space: nowrap;\n  border: 2px solid palevioletred;\n  & + button {\n    margin-left: 10px;\n  }\n`;\n\nexport const IconButton = styled(Button)((props: any) => ({\n  color: props.active ? \"mediumvioletred\" : \"lightpink\",\n  border: \"none\",\n  padding: 0,\n}));\n\nexport const Icon = styled.div``;\n\nexport const Grid = styled.div`\n  display: grid;\n  grid-gap: 1vw;\n  grid-template-columns: 1fr 1fr;\n  @media (max-width: 767px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const Title = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  @media (max-width: 767px) {\n    flex-wrap: wrap;\n  }\n`;\n\nexport const Instance = styled.div<{ online: boolean }>`\n  background: ${(props) =>\n    props.online ? \"rgba(128, 128, 128, 0.1)\" : \"rgba(247, 0, 0, 0.2)\"};\n  padding: 20px 20px 30px;\n`;\n\nexport const ClientFrame = styled.div`\n  box-shadow: 2px 2px 4px rgba(128, 128, 128, 0.2);\n  padding: 10px;\n  min-height: 70px;\n  margin-left: -10px;\n  margin-right: -10px;\n  background: white;\n  blockquote {\n    border-left: 2px solid #ddd;\n    margin-left: 0;\n    margin-right: 0;\n    padding-left: 10px;\n    color: #aaa;\n    font-style: italic;\n  }\n  a {\n    color: purple;\n    text-decoration: none;\n  }\n  a:visited {\n    color: darkmagenta;\n  }\n`;\n","import { Editor, Transforms } from \"slate\";\n\nconst LIST_TYPES: string[] = [\"numbered-list\", \"bulleted-list\"];\n\nexport const toggleBlock = (editor: Editor, format: string): void => {\n  const isActive = isBlockActive(editor, format);\n  const isList = LIST_TYPES.includes(format);\n\n  Transforms.unwrapNodes(editor, {\n    match: (n) => LIST_TYPES.includes(n.type as any),\n    split: true,\n  });\n\n  Transforms.setNodes(editor, {\n    type: isActive ? \"paragraph\" : isList ? \"list-item\" : format,\n  });\n\n  if (!isActive && isList) {\n    const block = { type: format, children: [] };\n    Transforms.wrapNodes(editor, block);\n  }\n};\n\nexport const isBlockActive = (editor: Editor, format: string): boolean => {\n  const [match] = Editor.nodes(editor, {\n    match: (n) => n.type === format,\n  });\n\n  return !!match;\n};\n","import isUrl from \"is-url\";\nimport { Editor, Element, Range, Transforms } from \"slate\";\n\nexport interface LinkEditor extends Editor {\n  insertData: (data: any) => void;\n}\n\nexport const withLinks = <T extends Editor>(editor: T): T & LinkEditor => {\n  const e = editor as T & LinkEditor;\n\n  const { insertData, insertText, isInline } = e;\n\n  e.isInline = (element: Element) => {\n    return element.type === \"link\" ? true : isInline(element);\n  };\n\n  e.insertText = (text: string): void => {\n    if (text && isUrl(text)) {\n      wrapLink(editor, text);\n    } else {\n      insertText(text);\n    }\n  };\n\n  e.insertData = (data: DataTransfer): void => {\n    const text = data.getData(\"text/plain\");\n\n    if (text && isUrl(text)) {\n      wrapLink(editor, text);\n    } else {\n      insertData(data);\n    }\n  };\n\n  return e;\n};\n\nexport const insertLink = (editor: Editor, href: string): void => {\n  if (editor.selection) {\n    wrapLink(editor, href);\n  }\n};\n\nexport const isLinkActive = (editor: Editor): boolean => {\n  const [link] = Editor.nodes(editor, { match: (n) => n.type === \"link\" });\n  return !!link;\n};\n\nexport const unwrapLink = (editor: Editor): void => {\n  Transforms.unwrapNodes(editor, { match: (n) => n.type === \"link\" });\n};\n\nexport const wrapLink = (editor: Editor, href: string): void => {\n  if (isLinkActive(editor)) {\n    unwrapLink(editor);\n  }\n\n  const { selection } = editor;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n  const link = {\n    type: \"link\",\n    href,\n    children: isCollapsed ? [{ text: href }] : [],\n  };\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link);\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true });\n    Transforms.collapse(editor, { edge: \"end\" });\n  }\n};\n","import { Editor } from \"slate\";\n\nexport const toggleMark = (editor: Editor, format: string): void => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n\nexport const isMarkActive = (editor: Editor, format: string): boolean => {\n  const marks = Editor.marks(editor);\n  return marks ? marks[format] === true : false;\n};\n","import React, { useCallback } from \"react\";\nimport { Node } from \"slate\";\nimport {\n  Editable,\n  ReactEditor,\n  RenderLeafProps,\n  Slate,\n  useSlate,\n} from \"slate-react\";\nimport { ClientFrame, Icon, IconButton } from \"./Components\";\nimport { isBlockActive, toggleBlock } from \"./plugins/block\";\nimport { insertLink, isLinkActive, unwrapLink } from \"./plugins/link\";\nimport { isMarkActive, toggleMark } from \"./plugins/mark\";\n\nexport interface EditorFrame {\n  editor: ReactEditor;\n  value: Node[];\n  onChange: (value: Node[]) => void;\n}\n\nconst renderElement = (props: any) => <Element {...props} />;\n\nconst EditorFrame: React.FC<EditorFrame> = ({ editor, value, onChange }) => {\n  const renderLeaf = useCallback((props: any) => <Leaf {...props} />, []);\n\n  return (\n    <ClientFrame>\n      <Slate editor={editor} value={value} onChange={onChange}>\n        <div\n          style={{\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            position: \"sticky\",\n            top: 0,\n            backgroundColor: \"white\",\n            zIndex: 1,\n          }}\n        >\n          <MarkButton format=\"bold\" icon=\"format_bold\" />\n          <MarkButton format=\"italic\" icon=\"format_italic\" />\n          <MarkButton format=\"underline\" icon=\"format_underlined\" />\n          <MarkButton format=\"code\" icon=\"code\" />\n\n          <BlockButton format=\"heading-one\" icon=\"looks_one\" />\n          <BlockButton format=\"heading-two\" icon=\"looks_two\" />\n          <BlockButton format=\"block-quote\" icon=\"format_quote\" />\n\n          <BlockButton format=\"numbered-list\" icon=\"format_list_numbered\" />\n          <BlockButton format=\"bulleted-list\" icon=\"format_list_bulleted\" />\n\n          <LinkButton />\n        </div>\n\n        <Editable renderElement={renderElement} renderLeaf={renderLeaf} />\n      </Slate>\n    </ClientFrame>\n  );\n};\n\nexport default EditorFrame;\n\nconst Element: React.FC<any> = ({ attributes, children, element }) => {\n  switch (element.type) {\n    case \"link\":\n      return (\n        <a {...attributes} href={element.href}>\n          {children}\n        </a>\n      );\n    case \"block-quote\":\n      return <blockquote {...attributes}>{children}</blockquote>;\n    case \"bulleted-list\":\n      return <ul {...attributes}>{children}</ul>;\n    case \"heading-one\":\n      return <h1 {...attributes}>{children}</h1>;\n    case \"heading-two\":\n      return <h2 {...attributes}>{children}</h2>;\n    case \"list-item\":\n      return <li {...attributes}>{children}</li>;\n    case \"numbered-list\":\n      return <ol {...attributes}>{children}</ol>;\n    default:\n      return <p {...attributes}>{children}</p>;\n  }\n};\n\nconst Leaf: React.FC<RenderLeafProps> = ({ attributes, children, leaf }) => {\n  if (leaf.bold) {\n    children = <strong>{children}</strong>;\n  }\n\n  if (leaf.code) {\n    children = <code>{children}</code>;\n  }\n\n  if (leaf.italic) {\n    children = <em>{children}</em>;\n  }\n\n  if (leaf.underline) {\n    children = <u>{children}</u>;\n  }\n\n  return (\n    <span\n      {...attributes}\n      style={\n        {\n          position: \"relative\",\n          backgroundColor: leaf.alphaColor,\n        } as any\n      }\n    >\n      {children}\n    </span>\n  );\n};\n\nconst BlockButton: React.FC<any> = ({ format, icon }) => {\n  const editor = useSlate();\n  return (\n    <IconButton\n      active={isBlockActive(editor, format)}\n      onMouseDown={(event: React.MouseEvent) => {\n        event.preventDefault();\n        toggleBlock(editor, format);\n      }}\n    >\n      <Icon className=\"material-icons\">{icon}</Icon>\n    </IconButton>\n  );\n};\n\nconst MarkButton: React.FC<any> = ({ format, icon }) => {\n  const editor = useSlate();\n  return (\n    <IconButton\n      active={isMarkActive(editor, format)}\n      onMouseDown={(event: React.MouseEvent) => {\n        event.preventDefault();\n        toggleMark(editor, format);\n      }}\n    >\n      <Icon className=\"material-icons\">{icon}</Icon>\n    </IconButton>\n  );\n};\n\nconst LinkButton = () => {\n  const editor = useSlate();\n\n  const isActive = isLinkActive(editor);\n\n  return (\n    <IconButton\n      active={isActive}\n      onMouseDown={(event: React.MouseEvent) => {\n        event.preventDefault();\n\n        if (isActive) return unwrapLink(editor);\n\n        const url = window.prompt(\"Enter the URL of the link:\");\n\n        url && insertLink(editor, url);\n      }}\n    >\n      <Icon className=\"material-icons\">link</Icon>\n    </IconButton>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { createEditor, Node } from \"slate\";\nimport { withHistory } from \"slate-history\";\nimport { withReact } from \"slate-react\";\nimport { SyncElement, toSharedType, withYjs } from \"slate-yjs\";\nimport { WebsocketProvider } from \"y-websocket\";\nimport * as Y from \"yjs\";\nimport { Button, H4, Instance, Title } from \"./Components\";\nimport EditorFrame from \"./EditorFrame\";\nimport { withLinks } from \"./plugins/link\";\n\nconst WEBSOCKET_ENDPOINT =\n  process.env.NODE_ENV === \"production\"\n    ? \"wss://demos.yjs.dev/slate-demo\"\n    : \"ws://localhost:1234\";\n\ninterface ClientProps {\n  name: string;\n  id: string;\n  slug: string;\n  removeUser: (id: any) => void;\n}\n\nconst Client: React.FC<ClientProps> = ({ id, name, slug, removeUser }) => {\n  const [value, setValue] = useState<Node[]>([]);\n  const [isOnline, setOnlineState] = useState<boolean>(false);\n\n  const [sharedType, provider] = useMemo(() => {\n    const doc = new Y.Doc();\n    const sharedType = doc.getArray<SyncElement>(\"content\");\n    const provider = new WebsocketProvider(WEBSOCKET_ENDPOINT, slug, doc, {\n      connect: false,\n    });\n    return [sharedType, provider];\n  }, [id]);\n\n  const editor = useMemo(() => {\n    const editor = withYjs(\n      withLinks(withReact(withHistory(createEditor()))),\n      sharedType\n    );\n\n    return editor;\n  }, [sharedType]);\n\n  useEffect(() => {\n    provider.on(\"status\", ({ status }: { status: string }) => {\n      setOnlineState(status === \"connected\");\n    });\n\n    // Super hacky way to provide a initial value from the client, if\n    // you plan to use y-websocket in prod you probably should provide the\n    // initial state from the server.\n    provider.on(\"sync\", (isSynced: boolean) => {\n      if (isSynced && sharedType.length === 0) {\n        toSharedType(sharedType, [\n          { type: \"paragraph\", children: [{ text: \"Hello world!\" }] },\n        ]);\n      }\n    });\n\n    provider.connect();\n\n    return () => {\n      provider.disconnect();\n    };\n  }, [provider]);\n\n  const toggleOnline = () => {\n    isOnline ? provider.disconnect() : provider.connect();\n  };\n\n  return (\n    <Instance online={isOnline}>\n      <Title>\n        <Head>Editor: {name}</Head>\n        <div style={{ display: \"flex\", marginTop: 10, marginBottom: 10 }}>\n          <Button type=\"button\" onClick={toggleOnline}>\n            Go {isOnline ? \"offline\" : \"online\"}\n          </Button>\n          <Button type=\"button\" onClick={() => removeUser(id)}>\n            Remove\n          </Button>\n        </div>\n      </Title>\n\n      <EditorFrame\n        editor={editor}\n        value={value}\n        onChange={(value: Node[]) => setValue(value)}\n      />\n    </Instance>\n  );\n};\n\nexport default Client;\n\nconst Head = styled(H4)`\n  margin-right: auto;\n`;\n","import faker from \"faker\";\nimport debounce from \"lodash/debounce\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport Client from \"./Client\";\nimport { Button, Grid, H4, Input, RoomWrapper, Title } from \"./Components\";\n\ninterface User {\n  id: string;\n  name: string;\n}\n\ninterface RoomProps {\n  slug: string;\n  removeRoom: () => void;\n}\n\nconst createUser = (): User => ({\n  id: faker.random.uuid(),\n  name: `${faker.name.firstName()} ${faker.name.lastName()}`,\n});\n\nconst Room: React.FC<RoomProps> = ({ slug, removeRoom }) => {\n  const [users, setUsers] = useState<User[]>([createUser(), createUser()]);\n  const [roomSlug, setRoomSlug] = useState<string>(slug);\n  const [isRemounted, setRemountState] = useState(false);\n\n  const remount = debounce(() => {\n    setRemountState(true);\n    setTimeout(setRemountState, 50, false);\n  }, 300);\n\n  const changeSlug = (e: ChangeEvent<HTMLInputElement>) => {\n    setRoomSlug(e.target.value);\n    remount();\n  };\n\n  const addUser = () => setUsers((users) => users.concat(createUser()));\n\n  const removeUser = (userId: string) =>\n    setUsers((users) => users.filter((u: User) => u.id !== userId));\n\n  return (\n    <RoomWrapper>\n      <Title>\n        <H4>Document slug:</H4>\n        <Input type=\"text\" value={roomSlug} onChange={changeSlug} />\n        <Button type=\"button\" onClick={addUser}>\n          Add random user\n        </Button>\n        <Button type=\"button\" onClick={removeRoom}>\n          Remove Room\n        </Button>\n      </Title>\n      <Grid>\n        {users.map((user: User) =>\n          isRemounted ? null : (\n            <Client\n              {...user}\n              slug={roomSlug}\n              key={user.id}\n              removeUser={removeUser}\n            />\n          )\n        )}\n      </Grid>\n    </RoomWrapper>\n  );\n};\n\nexport default Room;\n","import styled from \"@emotion/styled\";\nimport faker from \"faker\";\nimport React, { useEffect, useState } from \"react\";\nimport Room from \"./Room\";\n\nconst App: React.FC = () => {\n  const [rooms, setRooms] = useState<string[]>([]);\n  const addRoom = () => setRooms(rooms.concat(faker.lorem.slug(4)));\n  const removeRoom = (room: string) => () =>\n    setRooms(rooms.filter((r) => r !== room));\n\n  useEffect(() => {\n    addRoom();\n  }, []);\n\n  return (\n    <div>\n      <Panel>\n        <AddButton type=\"button\" onClick={addRoom}>\n          Add Room\n        </AddButton>\n      </Panel>\n      {rooms.map((room) => (\n        <Room key={room} slug={room} removeRoom={removeRoom(room)} />\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n\nconst Panel = styled.div`\n  display: flex;\n`;\n\nconst Button = styled.button`\n  padding: 6px 14px;\n  display: block;\n  outline: none;\n  font-size: 14px;\n  max-width: 200px;\n  text-align: center;\n  color: palevioletred;\n  border: 2px solid palevioletred;\n`;\n\nconst AddButton = styled(Button)`\n  margin-left: 0px;\n  color: violet;\n  margin-bottom: 10px;\n  border: 2px solid violet;\n`;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}